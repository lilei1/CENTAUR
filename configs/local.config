/*
 * CENTAUR Pipeline Configuration
 * Local execution configuration
 */

process {
    // Resource allocation
    cpus = 4
    memory = '8.GB'
    time = '2.h'
    
    // Error handling
    errorStrategy = 'retry'
    maxRetries = 3
    
    // Specific process configurations
    withName: 'QUALITY_CONTROL_METHYLATION' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'ALIGN_METHYLATION' {
        cpus = 8
        memory = '16.GB'
        time = '4.h'
    }
    
    withName: 'CALL_METHYLATION' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'EXTRACT_FRAGMENTOMICS' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'QUALITY_CONTROL_RNA' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'ALIGN_RNA' {
        cpus = 8
        memory = '16.GB'
        time = '4.h'
    }
    
    withName: 'QUANTIFY_GENES' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'NORMALIZE_EXPRESSION' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'DIFFERENTIAL_EXPRESSION' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'CALCULATE_IMMUNE_SIGNATURES' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'CALL_SOMATIC_VARIANTS' {
        cpus = 8
        memory = '32.GB'
        time = '8.h'
    }
    
    withName: 'ANNOTATE_VARIANTS' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'CALCULATE_TMB' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'ANALYZE_CNV' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'HARMONIZE_SAMPLE_DATA' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'EXTRACT_BIOMARKER_FEATURES' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'CREATE_FEATURE_MATRIX' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
    
    withName: 'PERFORM_DIMENSIONALITY_REDUCTION' {
        cpus = 4
        memory = '8.GB'
        time = '2.h'
    }
    
    withName: 'GENERATE_FINAL_FEATURES' {
        cpus = 2
        memory = '4.GB'
        time = '1.h'
    }
}

// Execution configuration
executor {
    name = 'local'
    queueSize = 10
}

// Workflow configuration
workflow {
    onComplete = 'echo "CENTAUR pipeline completed successfully!"'
    onError = 'echo "CENTAUR pipeline failed!"'
}

// Environment variables
env {
    PATH = '/usr/local/bin:/usr/bin:/bin'
    PYTHONPATH = '/usr/local/lib/python3.8/site-packages'
}

// Docker configuration
docker {
    enabled = true
    user = false
    runOptions = '--rm -u $(id -u):$(id -g)'
}

// Singularity configuration
singularity {
    enabled = false
    autoMounts = true
    cacheDir = '/tmp/singularity'
}

// Conda configuration
conda {
    enabled = false
    cacheDir = '/tmp/conda'
}

// Environment modules
modules {
    enabled = false
}
